# This workflow integrates Pint Scan with GitHub's code scanning feature
# Laravel Pint is an opinionated PHP code style fixer for minimalists. Pint is built on top of PHP-CS-Fixer
# Visit https://laravel.com/docs/9.x/pint for help
name: Run Pint Apply

# This section configures the trigger for the workflow. Feel free to customize depending on your convention
on:
  workflow_dispatch:

jobs:
  pint:
    runs-on: "ubuntu-latest"

    steps:
      - name: "Checkout code"
        uses: "actions/checkout@v3"

      - name: "Setup PHP"
        uses: "shivammathur/setup-php@v2"
        with:
          php-version: "8.1"
          extensions: "dom, curl, libxml, mbstring, zip, fileinfo"
          tools: "composer:v2"
          coverage: "none"

      # - name: cd into root path
      #   run: cd ${{ inputs.root-path }}

      # - name: Add HTTP basic auth credentials
      #   run: echo '${{ secrets.COMPOSER_AUTH_JSON }}' > $GITHUB_WORKSPACE/auth.json

      - name: "Install laravel/pint"
        run: "composer global require laravel/pint --no-progress --dev"

      # - name: "Apply pint styles"
      #   run: "pint"

      - uses: actions/checkout@v3

      - name: "Apply pint styles"
        run: |
          pint
          git config user.name github-actions
          git config user.email github-actions@github.com
          git add .
          git commit -m "apply pint"
          git push
